const h=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function i(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(e){if(e.ep)return;e.ep=!0;const o=i(e);fetch(e.href,o)}};h();var m={};Object.defineProperty(m,"__esModule",{value:!0});var T=function(){function a(){this.seperator=","}return a.prototype.correctFormat=function(r){var i=r.replace(".",","),t=null,e=null,o=null,s=null,u=i.split(","),n=u[0],l=u[1];s=this.fixed_str_digit(3,l);var d=n.split(":"),f=d[0],g=d[1],y=d[2];return t=this.fixed_str_digit(2,f,!1),e=this.fixed_str_digit(2,g,!1),o=this.fixed_str_digit(2,y,!1),t+":"+e+":"+o+","+s},a.prototype.fixed_str_digit=function(r,i,t){if(t===void 0&&(t=!0),i.length==r)return i;if(i.length>r)return i.slice(0,r);if(i.length<r)return t?i.padEnd(r,"0"):i.padStart(r,"0")},a.prototype.tryComma=function(r){r=r.replace(/\r/g,"");var i=/(\d+)\n(\d{1,2}:\d{2}:\d{2},\d{1,3}) --> (\d{1,2}:\d{2}:\d{2},\d{1,3})/g,t=r.split(i);return t.shift(),t},a.prototype.tryDot=function(r){r=r.replace(/\r/g,"");var i=/(\d+)\n(\d{1,2}:\d{2}:\d{2}\.\d{1,3}) --> (\d{1,2}:\d{2}:\d{2}\.\d{1,3})/g,t=r.split(i);return t.shift(),this.seperator=".",t},a.prototype.fromSrt=function(r){var i=r,t=this.tryComma(i);t.length==0&&(t=this.tryDot(i));for(var e=[],o=0;o<t.length;o+=4){var s={id:t[o].trim(),startTime:this.correctFormat(t[o+1].trim()),endTime:this.correctFormat(t[o+2].trim()),text:t[o+3].trim()};e.push(s)}return e},a.prototype.toSrt=function(r){for(var i="",t=0;t<r.length;t++){var e=r[t];i+=e.id+`\r
`,i+=e.startTime+" --> "+e.endTime+`\r
`,i+=e.text.replace(`
`,`\r
`)+`\r
\r
`}return i},a}(),F=m.default=T;const p=new ClipboardJS("#copy");p.on("success",function(a){c("\u590D\u5236\u6210\u529F")});p.on("error",function(a){c("\u590D\u5236\u5931\u8D25")});document.getElementById("go").addEventListener("click",()=>{let a=document.getElementById("srt").value;if(a!==""){let r=S(a,document.getElementById("style").value);document.getElementById("ass").value=r}else c("\u8BF7\u586B\u5165 SRT \u5B57\u5E55\u6B63\u6587")});function c(a){document.getElementById("log").insertAdjacentHTML("afterbegin",a+"<br>"),console.log(a)}function S(a,r){(r==""||r==null)&&(r="Top");let t=new F().fromSrt(a),e=new Array;for(let n in t)if(t[n].text.includes(`
`)){let l=t[n].text.split(`
`);for(let d in l){let f={startTime:t[n].startTime,endTime:t[n].endTime,text:l[d],style:"Default"};e.push(f)}}else{let l={startTime:t[n].startTime,endTime:t[n].endTime,text:t[n].text,style:"Default"};e.push(l)}for(let n in e)for(let l=0;l<e.length;l++)e[l].startTime==e[n].endTime&&e[l].text==e[n].text&&(c(`[\u884C ${n} ==> ${l}] ${e[l].text} (${e[n].endTime} ==> ${e[l].endTime})`),e[n].endTime=e[l].endTime,e.splice(l,1),l=l-1);for(let n in e)(e[n].text.startsWith("(")&&e[n].text.endsWith(")")||e[n].text.startsWith("\uFF08")&&e[n].text.endsWith("\uFF09"))&&(c(`[\u884C ${n}] ${e[n].text} \u66F4\u6362\u4E3A ${r} \u6837\u5F0F`),e[n].style=r);let o=new Date,u=`[Script Info]
; Script generated by LavaAnimeSubTools
; Generate time: ${`${o.toLocaleString("zh-CN",{hour12:!1})} (${o.getTime()})`}
Title: New Subtitle
Original Script: LavaAnimeSubTools
ScriptType: v4.00+
WrapStyle: 0
ScaledBorderAndShadow: yes
PlayResX: 1920
PlayResY: 1080

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,ZhunYuan,64,&H00FFFFFF,&H00FFFFFF,&H002A2A2A,&HFF0E0807,0,0,0,0,100,100,1,0,1,3.1,0,2,135,135,32,1
Style: ${r},\u963F\u91CC\u5DF4\u5DF4\u666E\u60E0\u4F53 B,64,&H00FFFFFF,&H00FFFFFF,&H00BD3B24,&HFF0E0807,0,0,0,0,100,100,1,0,1,3.1,0,8,135,135,20,1

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
`;for(let n in e){let l=e[n].startTime.slice(1,11).replace(",","."),d=e[n].endTime.slice(1,11).replace(",","."),f=`Dialogue: 0,${l},${d},${e[n].style},,0,0,0,,${e[n].text}`;u=u+f+`
`}return e.length==0?(c("\u6CA1\u6709\u53EF\u4EE5\u8F6C\u6362\u7684\u5B57\u5E55\uFF0C\u8BF7\u68C0\u67E5 SRT \u5185\u5BB9\uFF01"),""):u}
