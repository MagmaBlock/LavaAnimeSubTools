const ee=function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))t(p);new MutationObserver(p=>{for(const a of p)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function c(p){const a={};return p.integrity&&(a.integrity=p.integrity),p.referrerpolicy&&(a.referrerPolicy=p.referrerpolicy),p.crossorigin==="use-credentials"?a.credentials="include":p.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(p){if(p.ep)return;p.ep=!0;const a=c(p);fetch(p.href,a)}};ee();var te=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ne(y){return y&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y}var D={};Object.defineProperty(D,"__esModule",{value:!0});var re=function(){function y(){this.seperator=","}return y.prototype.correctFormat=function(d){var c=d.replace(".",","),t=null,p=null,a=null,s=null,n=c.split(","),e=n[0],r=n[1];s=this.fixed_str_digit(3,r);var u=e.split(":"),b=u[0],S=u[1],x=u[2];return t=this.fixed_str_digit(2,b,!1),p=this.fixed_str_digit(2,S,!1),a=this.fixed_str_digit(2,x,!1),t+":"+p+":"+a+","+s},y.prototype.fixed_str_digit=function(d,c,t){if(t===void 0&&(t=!0),c.length==d)return c;if(c.length>d)return c.slice(0,d);if(c.length<d)return t?c.padEnd(d,"0"):c.padStart(d,"0")},y.prototype.tryComma=function(d){d=d.replace(/\r/g,"");var c=/(\d+)\n(\d{1,2}:\d{2}:\d{2},\d{1,3}) --> (\d{1,2}:\d{2}:\d{2},\d{1,3})/g,t=d.split(c);return t.shift(),t},y.prototype.tryDot=function(d){d=d.replace(/\r/g,"");var c=/(\d+)\n(\d{1,2}:\d{2}:\d{2}\.\d{1,3}) --> (\d{1,2}:\d{2}:\d{2}\.\d{1,3})/g,t=d.split(c);return t.shift(),this.seperator=".",t},y.prototype.fromSrt=function(d){var c=d,t=this.tryComma(c);t.length==0&&(t=this.tryDot(c));for(var p=[],a=0;a<t.length;a+=4){var s={id:t[a].trim(),startTime:this.correctFormat(t[a+1].trim()),endTime:this.correctFormat(t[a+2].trim()),text:t[a+3].trim()};p.push(s)}return p},y.prototype.toSrt=function(d){for(var c="",t=0;t<d.length;t++){var p=d[t];c+=p.id+`\r
`,c+=p.startTime+" --> "+p.endTime+`\r
`,c+=p.text.replace(`
`,`\r
`)+`\r
\r
`}return c},y}(),oe=D.default=re,j={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(y,d){(function(t,p){y.exports=p()})(te,function(){return function(){var c={686:function(a,s,n){n.d(s,{default:function(){return Z}});var e=n(279),r=n.n(e),u=n(370),b=n.n(u),S=n(817),x=n.n(S);function v(m){try{return document.execCommand(m)}catch{return!1}}var T=function(i){var o=x()(i);return v("cut"),o},h=T;function A(m){var i=document.documentElement.getAttribute("dir")==="rtl",o=document.createElement("textarea");o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[i?"right":"left"]="-9999px";var l=window.pageYOffset||document.documentElement.scrollTop;return o.style.top="".concat(l,"px"),o.setAttribute("readonly",""),o.value=m,o}var M=function(i,o){var l=A(i);o.container.appendChild(l);var f=x()(l);return v("copy"),l.remove(),f},J=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},l="";return typeof i=="string"?l=M(i,o):i instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(i==null?void 0:i.type)?l=M(i.value,o):(l=x()(i),v("copy")),l},R=J;function L(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?L=function(o){return typeof o}:L=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},L(m)}var q=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.action,l=o===void 0?"copy":o,f=i.container,g=i.target,w=i.text;if(l!=="copy"&&l!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(g!==void 0)if(g&&L(g)==="object"&&g.nodeType===1){if(l==="copy"&&g.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(l==="cut"&&(g.hasAttribute("readonly")||g.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(w)return R(w,{container:f});if(g)return l==="cut"?h(g):R(g,{container:f})},W=q;function F(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?F=function(o){return typeof o}:F=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},F(m)}function z(m,i){if(!(m instanceof i))throw new TypeError("Cannot call a class as a function")}function P(m,i){for(var o=0;o<i.length;o++){var l=i[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(m,l.key,l)}}function U(m,i,o){return i&&P(m.prototype,i),o&&P(m,o),m}function Y(m,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(i&&i.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),i&&I(m,i)}function I(m,i){return I=Object.setPrototypeOf||function(l,f){return l.__proto__=f,l},I(m,i)}function V(m){var i=K();return function(){var l=O(m),f;if(i){var g=O(this).constructor;f=Reflect.construct(l,arguments,g)}else f=l.apply(this,arguments);return G(this,f)}}function G(m,i){return i&&(F(i)==="object"||typeof i=="function")?i:X(m)}function X(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function K(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function O(m){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},O(m)}function N(m,i){var o="data-clipboard-".concat(m);if(!!i.hasAttribute(o))return i.getAttribute(o)}var Q=function(m){Y(o,m);var i=V(o);function o(l,f){var g;return z(this,o),g=i.call(this),g.resolveOptions(f),g.listenClick(l),g}return U(o,[{key:"resolveOptions",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof f.action=="function"?f.action:this.defaultAction,this.target=typeof f.target=="function"?f.target:this.defaultTarget,this.text=typeof f.text=="function"?f.text:this.defaultText,this.container=F(f.container)==="object"?f.container:document.body}},{key:"listenClick",value:function(f){var g=this;this.listener=b()(f,"click",function(w){return g.onClick(w)})}},{key:"onClick",value:function(f){var g=f.delegateTarget||f.currentTarget,w=this.action(g)||"copy",C=W({action:w,container:this.container,target:this.target(g),text:this.text(g)});this.emit(C?"success":"error",{action:w,text:C,trigger:g,clearSelection:function(){g&&g.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(f){return N("action",f)}},{key:"defaultTarget",value:function(f){var g=N("target",f);if(g)return document.querySelector(g)}},{key:"defaultText",value:function(f){return N("text",f)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return R(f,g)}},{key:"cut",value:function(f){return h(f)}},{key:"isSupported",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],g=typeof f=="string"?[f]:f,w=!!document.queryCommandSupported;return g.forEach(function(C){w=w&&!!document.queryCommandSupported(C)}),w}}]),o}(r()),Z=Q},828:function(a){var s=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}function e(r,u){for(;r&&r.nodeType!==s;){if(typeof r.matches=="function"&&r.matches(u))return r;r=r.parentNode}}a.exports=e},438:function(a,s,n){var e=n(828);function r(S,x,v,T,h){var A=b.apply(this,arguments);return S.addEventListener(v,A,h),{destroy:function(){S.removeEventListener(v,A,h)}}}function u(S,x,v,T,h){return typeof S.addEventListener=="function"?r.apply(null,arguments):typeof v=="function"?r.bind(null,document).apply(null,arguments):(typeof S=="string"&&(S=document.querySelectorAll(S)),Array.prototype.map.call(S,function(A){return r(A,x,v,T,h)}))}function b(S,x,v,T){return function(h){h.delegateTarget=e(h.target,x),h.delegateTarget&&T.call(S,h)}}a.exports=u},879:function(a,s){s.node=function(n){return n!==void 0&&n instanceof HTMLElement&&n.nodeType===1},s.nodeList=function(n){var e=Object.prototype.toString.call(n);return n!==void 0&&(e==="[object NodeList]"||e==="[object HTMLCollection]")&&"length"in n&&(n.length===0||s.node(n[0]))},s.string=function(n){return typeof n=="string"||n instanceof String},s.fn=function(n){var e=Object.prototype.toString.call(n);return e==="[object Function]"}},370:function(a,s,n){var e=n(879),r=n(438);function u(v,T,h){if(!v&&!T&&!h)throw new Error("Missing required arguments");if(!e.string(T))throw new TypeError("Second argument must be a String");if(!e.fn(h))throw new TypeError("Third argument must be a Function");if(e.node(v))return b(v,T,h);if(e.nodeList(v))return S(v,T,h);if(e.string(v))return x(v,T,h);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function b(v,T,h){return v.addEventListener(T,h),{destroy:function(){v.removeEventListener(T,h)}}}function S(v,T,h){return Array.prototype.forEach.call(v,function(A){A.addEventListener(T,h)}),{destroy:function(){Array.prototype.forEach.call(v,function(A){A.removeEventListener(T,h)})}}}function x(v,T,h){return r(document.body,v,T,h)}a.exports=u},817:function(a){function s(n){var e;if(n.nodeName==="SELECT")n.focus(),e=n.value;else if(n.nodeName==="INPUT"||n.nodeName==="TEXTAREA"){var r=n.hasAttribute("readonly");r||n.setAttribute("readonly",""),n.select(),n.setSelectionRange(0,n.value.length),r||n.removeAttribute("readonly"),e=n.value}else{n.hasAttribute("contenteditable")&&n.focus();var u=window.getSelection(),b=document.createRange();b.selectNodeContents(n),u.removeAllRanges(),u.addRange(b),e=u.toString()}return e}a.exports=s},279:function(a){function s(){}s.prototype={on:function(n,e,r){var u=this.e||(this.e={});return(u[n]||(u[n]=[])).push({fn:e,ctx:r}),this},once:function(n,e,r){var u=this;function b(){u.off(n,b),e.apply(r,arguments)}return b._=e,this.on(n,b,r)},emit:function(n){var e=[].slice.call(arguments,1),r=((this.e||(this.e={}))[n]||[]).slice(),u=0,b=r.length;for(u;u<b;u++)r[u].fn.apply(r[u].ctx,e);return this},off:function(n,e){var r=this.e||(this.e={}),u=r[n],b=[];if(u&&e)for(var S=0,x=u.length;S<x;S++)u[S].fn!==e&&u[S].fn._!==e&&b.push(u[S]);return b.length?r[n]=b:delete r[n],this}},a.exports=s,a.exports.TinyEmitter=s}},t={};function p(a){if(t[a])return t[a].exports;var s=t[a]={exports:{}};return c[a](s,s.exports,p),s.exports}return function(){p.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return p.d(s,{a:s}),s}}(),function(){p.d=function(a,s){for(var n in s)p.o(s,n)&&!p.o(a,n)&&Object.defineProperty(a,n,{enumerable:!0,get:s[n]})}}(),function(){p.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)}}(),p(686)}().default})})(j);var ie=ne(j.exports);const ae=new oe,H=new ie("#copy");var B=document.getElementById("customBracketStyle"),k=document.getElementById("quoteReplace");if(localStorage.getItem("config")!==null){var _=JSON.parse(localStorage.getItem("config"));console.log("\u8BFB\u53D6\u8BBE\u7F6E\uFF1A",_),B.value=_.customBracketStyle,k.checked=_.quoteReplace}else{localStorage.setItem("config",JSON.stringify({quoteReplace:!1,customBracketStyle:""}));var _=JSON.parse(localStorage.getItem("config"));console.log("\u65B0\u5EFA\u8BBE\u7F6E\uFF1A",_)}B.addEventListener("input",function(){_.customBracketStyle=B.value,localStorage.setItem("config",JSON.stringify(_))});k.addEventListener("change",function(){_.quoteReplace=k.checked,localStorage.setItem("config",JSON.stringify(_))});H.on("success",function(y){E("\u590D\u5236\u7ED3\u679C\u6210\u529F")});H.on("error",function(y){E("\u590D\u5236\u7ED3\u679C\u5931\u8D25")});document.getElementById("download").addEventListener("click",()=>{let y=document.getElementById("ass").value;y!==""?ue(`Generated_${new Date().getTime()}.ass`,y):E("\u5C1A\u672A\u751F\u6210 ASS \u5185\u5BB9!",!0)});function ue(y,d){var c=document.createElement("a");c.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(d)),c.setAttribute("download",y);var t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});c.dispatchEvent(t)}var $=document.getElementById("srt");document.ondrop=function(y){y.preventDefault()};document.ondragover=function(y){y.preventDefault()};$.ondragenter=function(){document.getElementById("srt-element-father").classList.add("mdui-textfield-focus")};$.ondragleave=function(){document.getElementById("srt-element-father").classList.remove("mdui-textfield-focus")};$.ondrop=function(y){var d=new FileReader;d.readAsText(y.dataTransfer.files[0]),d.onload=function(){$.value=d.result}};document.getElementById("go").addEventListener("click",()=>{let y=document.getElementById("srt").value,d=_.customBracketStyle!==""?_.customBracketStyle:"Top";if(y!==""){let c=ce(y,d);document.getElementById("ass").value=c}else E("\u8BF7\u586B\u5165 SRT \u5B57\u5E55\u6B63\u6587",!0)});function E(y,d=!1){document.getElementById("log").insertAdjacentHTML("afterbegin",y+"<br>"),console.log(y),d&&mdui.snackbar({message:y})}function ce(y,d){let c=ae.fromSrt(y),t=new Array;for(let e in c)if(c[e].text.includes(`
`)){let r=c[e].text.split(`
`);E(`[\u62C6\u5206\u591A\u884C][${e}] ${JSON.stringify(r)}`);for(let u in r){let b={startTime:c[e].startTime,endTime:c[e].endTime,text:r[u],style:"Default",comment:!1};t.push(b)}}else{let r={startTime:c[e].startTime,endTime:c[e].endTime,text:c[e].text,style:"Default",comment:!1};t.push(r)}for(let e in t){t[e].text.startsWith("-")&&t[e].text.split("-").length==2&&(E(`[\u5220\u9664\u6B8B\u7559\u6A2A\u6760][${e}] ${t[e].text} \u7684\u5F00\u5934\u662F - \u4E14\u662F\u4E00\u4E2A\u5355\u72EC\u5BF9\u8BDD\uFF0C\u79FB\u9664...`),t[e].text=t[e].text.replace(/^-/,""));let r=t[e].text.split("-");if(r.length>=3&&r[0]==""&&r[1]!=""&&r[2]!=""){E(`[\u5355\u884C\u591A\u91CD\u5BF9\u8BDD][\u884C ${e}] ${t[e].text} \u53EF\u80FD\u4E3A\u591A\u91CD\u5BF9\u8BDD\uFF0C\u51C6\u5907\u62C6\u5206`),r.splice(0,1);for(let u=0;u<r.length;u++){r[u]=r[u].trim(),E(`[\u5355\u884C\u591A\u91CD\u5BF9\u8BDD][\u884C ${e}] \u62C6\u5206\u5355\u884C(${u}): ${r[u]}`);let b={startTime:t[e].startTime,endTime:t[e].endTime,text:r[u],style:"Default",comment:!1};t.splice(parseInt(e)+1,0,b),t[e].comment=!0}}}for(let e in t)for(let r=0;r<t.length;r++)t[r].startTime==t[e].endTime&&t[r].text==t[e].text&&(E(`[\u5408\u5E76\u5206\u88C2\u884C][${e} ==> ${r}](${t[e].endTime} => ${t[r].endTime}) ${t[r].text}`),t[e].endTime=t[r].endTime,t.splice(r,1),r=r-1);for(let e in t){let r=t[e].text;(r.startsWith("(")&&r.endsWith(")")||r.startsWith("\uFF08")&&r.endsWith("\uFF09"))&&(E(`[\u62EC\u53F7\u884C\u6837\u5F0F][\u884C ${e}] ${r} \u66F4\u6362\u4E3A ${d} \u6837\u5F0F`),t[e].style=d)}k.checked&&p();function p(){for(let e in t)t[e].text.match(/\“|\”/)&&(E(`[\u53D8\u6210\u65B9\u62EC\u53F7][${e}] ${t[e].text}`),t[e].text=t[e].text.replace(/“/g,"\u300C").replace(/”/g,"\u300D"))}console.log("\u4E0B\u65B9\u662F\u6700\u7EC8\u7684\u5B57\u5E55\u6570\u7EC4\uFF1A"),console.log(t);let a=new Date,n=`[Script Info]
; Script generated by LavaAnimeSubTools
; Generate time: ${`${a.toLocaleString("zh-CN",{hour12:!1})} (${a.getTime()})`}
Title: New Subtitle
Original Script: LavaAnimeSubTools
ScriptType: v4.00+
WrapStyle: 0
ScaledBorderAndShadow: yes
PlayResX: 1920
PlayResY: 1080

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,\u963F\u91CC\u5DF4\u5DF4\u666E\u60E0\u4F53 M,81,&H00FFFFFF,&H00FFFFFF,&H002A2A2A,&HFF0E0807,0,0,0,0,100,100,1,0,1,3,0,2,135,135,32,1
Style: Top,\u963F\u91CC\u5DF4\u5DF4\u666E\u60E0\u4F53 B,64,&H00FFFFFF,&H00FFFFFF,&H000A0A0A,&HFF0E0807,0,0,0,0,100,100,1,0,1,3,0,8,135,135,20,1

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
`;for(let e in t){let r=t[e].startTime.slice(1,11).replace(",","."),u=t[e].endTime.slice(1,11).replace(",","."),S=`${t[e].comment?"Comment":"Dialogue"}: 0,${r},${u},${t[e].style},,0,0,0,,${t[e].text}
`;n=n.concat(S)}return t.length==0?(E("\u6CA1\u6709\u53EF\u4EE5\u8F6C\u6362\u7684\u5B57\u5E55\uFF0C\u8BF7\u68C0\u67E5 SRT \u5185\u5BB9\uFF01",!0),""):n}
